var adlCreative=function(){var t=this;return t.state=0,t.readyStack=[],t.images={},t.fonts={},t.orphans={},t.rules={},t};window._$=adlCreative,_$.fn=_$.prototype,window._adl=_$,_$.fn.init=function(t){t=t||{};$.d;var e=this;e.state="init",$.log("Init"),e.sheet=$.makeSheet(),t="string"==typeof t?JSON.parse(atob(t)):t,e.size=t.size,e.format=t.formatid||"1",e.clickTags=t.clickTags||{main_exit:"Default Landing Page"},e.version_data=t.version_data||{},e.objcount=+new Date,e.responsive=t.responsive||0,e.obj=t.obj||{},$.dict=t.dict||{},e.prep(t);var n=e.orphans;if(t.obj)for(var r in t.obj)if(t.obj.hasOwnProperty(r)){var i=$.mkObject(r,t.obj[r]);if("adl--stage"==r&&(i.style.opacity=.001,e.stage=i,$(i).style(t.size)),n&&n[r]){for(var a,s,o=[],f=0;f<n[r].length;f++)i.firstChild.appendChild(n[r][f]),o.push(n[r][f].dataset.key);for(a in o)o.hasOwnProperty(a)&&(s=o[a],$.undef(e.obj[s].zorder)||$(e.obj[s].elnode).zorder(e.obj[s].zorder));delete n[r]}}for(r in n){for(f=0;f<n[r].length;f++)$(n[r][f]).parent("adl--stage");delete n[r]}$(e.stage).addClass(e.format),e.mo=0,$(e.stage).on("mouseover",function(){$.cr.mo||(this.parentNode.classList.add("mouseover"),EvBus.send("mouseover")),$.cr.mo++}).on("mouseout",function(){$.cr.mo--,$.cr.mo||(this.parentNode.classList.remove("mouseover"),EvBus.send("mouseout"))}),document.body.appendChild(e.stage);var l=e.obj["adl--stage"].scripts||{};for($.undef(l.click)&&(l.click=function(){}),document.body.addEventListener("click",l.click),$.log("Preparing!");e.readyStack.length;)e.readyStack.shift().call();$.log("On-Load Scripts Executed...!"),e._waitload()},_$.fn._waitload=function(){$.okeys($.cr.images).length?setTimeout($.cr._waitload,25):$.cr._ready()},_$.fn._ready=function(){EvBus.send("ready"),!(this.state="Ready")!==this.autoplay&&this.run()},_$.fn.getVersionData=function(t){return this.version_data[t]},_$.fn.versionData=function(t,e){if($.undef(e))return this.version_data[t]||"";this.version_data[t]=e},_$.fn.prop=function(t,e){if($.undef(e))return this[t];this[t]=e},_$.fn.getStage=function(){return this.stage},_$.fn.getObjData=function(t){return this.obj[t]};var adl=function(t){return new adlayer(t)},adlayer=function(t){var e=this;if(!(e instanceof adlayer))return new adlayer(t);if(e.length=0,e.nodes=[],t instanceof HTMLElement?e.nodes=[t]:t instanceof NodeList?e.nodes=1<t.length?[].slice.call(t):[t]:"string"==typeof t&&(e.nodes=[].slice.call($.d.querySelectorAll(t))),e.nodes.length){e.length=this.nodes.length;for(var n=0;n<e.nodes.length;n++)e[n]=e.nodes[n]}return e};adl.fn=adlayer.prototype,window.adl=adl,window.$=adl,void 0!==adlCreative&&($.cr=new adlCreative),$.d=document,$.undef=function(t){return void 0===t},$.pf=window.parseFloat,$.okeys=function(t){return Object.keys(t)},$.log=function(t){},$.now=function(){return+Date.now()},$.gc=function(t){return t.firstChild},$.ac=function(t,e){t.appendChild(e)},$.pfx=function(){var t=window.getComputedStyle($.d.documentElement,""),t=$.undef(t.animation)?"-webkit-":"";return $.pfxa=t+"animation",t}(),$.ruleIndex={obj:"",ct:">.adl-obj-content"},$.ctstyles=/border|background|padding|opacity/,$.dict={},$.isIE=function(){return"Microsoft Internet Explorer"==navigator.appName||!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv:11/))||!1},$.isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,$.cssify=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},$.vd=function(t,e){return $.cr.versionData(t,e)},$.fn.map=function(t){for(var e=[],n=0;n<this.length;n++)e.push(t.call(this[n],this,n));return e},$.fn.each=function(t){return this.map(t),this},$.apply=function(){for(var t={},e=0;e<arguments.length;e++)t=$.assign(t,arguments[e]||{});return t},$.assign=function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&("object"!=typeof e[r]||Array.isArray(e[r])?t[r]=e[r]:n&&isEmpty(e[r])&&t[r]?delete t[r]:("object"!=typeof t[r]&&(t[r]={}),t[r]=$.assign(t[r]||{},e[r],n)));return t},$.makeSheet=function(){var t,e=this.mkKey(),n=$.mkEl("style");for(t in n.type="text/css",n.title=e,$.ac($.d.head,n),$.d.styleSheets)if($.d.styleSheets[t].title==e)return $.d.styleSheets[t];return!1},$.mkEl=function(t){return t=t||"div",$.d.createElement(t)},$.fn.el=function(t,e){return t?$.undef(e)?this[0][t]:void(this[0][t]=e):this[0]},$.fn.copyEl=function(t,e){return e=e||!1,this.each(function(){$.ac(t,this.cloneNode(e))})},$.get=function(t){return $.cr.obj[t]?$('.adl-obj[data-key="'+t+'"]'):$(t)},$.select=function(t){return"#"==t[0]?$.d.getElementById(t.substr(1)):$(t)[0]},$.fn.rmEl=function(){return this.remove()},$.fn.remove=function(){return this.each(function(){var t=this.dataset.key;t?$.cr.removeObject(t):this.parentNode.removeChild(this)})},$.fn.parent=function(t){if($.undef(t))return $.getObj(this[0].parentNode);var e;if("number"==typeof t||"string"==typeof t){if(t=parseInt(t)||t,e=$.get(t),$(this[0]).data("group",t),!e.length){var n=$.cr.getObjData(t,1);if(!n||!n.elnode){var r=$.cr.orphans;return r[t]||(r[t]=[]),r[t].push(this[0]),this}e=$(n.elnode)}}else t instanceof HTMLElement&&(t=(e=$(t)).key(),this[0].dataset.group=t);return e.length&&$.ac($.gc(e[0]),this[0]),this},$.fn.children=function(t){if($.undef(t))return-1<["group","stage","container"].indexOf(this.type())?this.ctNode(1).childNodes:[];for(var e in t){var n;t.hasOwnProperty(e)&&(t[e].key=e,(n=$.mkObject(t[e])).dataset.group=this[0].id,$.ac($.gc(this[0]),n))}},$.fn.find=function(t){var e=this.map(function(){return[].slice.call(this.querySelectorAll(t))}),n=$();if(e.forEach(function(t){t.forEach(function(t){n.nodes.push(t)})}),n.nodes.length){n.length=n.nodes.length;for(var r=0;r<n.nodes.length;r++)n[r]=n.nodes[r]}return n},$.mkKey=function(){return $._keyb||($._keyb=+new Date),$._keyb++},$.mkObject=function(t,e,n){var r=e.type;if(r){$.cr.obj[t]={};var i=$.mkEl("div");i.dataset.key=t,$.cr.obj[t].elnode=i;var a=$(i);return a.addClass("adl-obj adl-obj-"+r+" adl-obj-"+t),"function"==typeof $.fn["mkObj_"+r]?$.fn["mkObj_"+r](a):$.addCtNode(a),"adl--stage"!==t&&(e.parent=e.parent||"adl--stage",n||$.undef($.vd(t))||(e[r]=$.vd(t))),this.build(a,e),i}return $.log("Error! Unknown object type."),!1},$.build=function(t,e,n){e.parent&&t.parent(e.parent);var r,i,a=e.type;for(r in e)e.hasOwnProperty(r)&&"parent"!==r&&r!==a&&(i=e[r],"function"==typeof t[r]?t[r](i,n):$.log("Error! Unknown parameter: "+r));e[a]&&"function"==typeof t[a]&&t[a](e[a])},$.addCtNode=function(t){var e=$.mkEl();$.ac(t[0],e),$(e).addClass("adl-obj-content")},$.fn.ctNode=function(t){var e=$.gc(this[0]);return t?e:$(e)},$.getObj=function(t){if($(t).hasClass("adl-creative"))return!1;for(;t&&!$(t).hasClass("adl-obj");){if(!t.parentNode)return!1;t=t.parentNode}return t},$.fn.key=function(){return this[0].dataset.key},$.fn.id=function(t,e){var n=$.cr.obj;"id"!==t&&(e=t);t=this.key();return $.undef(e)?t&&n[t]?n[t].id||"":this[0].id:(this[0].id=e,n[t].id=e,this)},$.fn.type=function(t){var e=$.cr.obj;if($.undef(t)){var n=this.key();return!(!n||!e[n])&&e[n].type}return this.each(function(){e[$(this).key()].type=t})},$.fn.attr=function(t,e){if($.undef(e)&&"string"==typeof t){var n=$.cr.getObjData([this.key()]);return n.attr=n.attr||{},n.attr[t]}var r={};return"object"!=typeof t?r[t]=e:r=t,this.each(function(){var t=$(this),t=$.cr.getObjData([t.key()]);t.attr=t.attr||{};var e,n=t.attr;for(e in r)n[e]=r[e],$.gc(this)[e]=r[e]})},$.fn.adlcls=function(t,i){if("string"==typeof t&&$.undef(i)){var e=this.key();return($.cr.getObjData(e).adlcls||{})[t]||!1}var a;return"string"==typeof t&&"string"==typeof i?(a=i,(i={})[t]=a):i=t,this.each(function(){var t,e=adl(this),n=e.key(),r=$.cr.getObjData(n);for(t in r.adlcls=r.adlcls||{},i)i.hasOwnProperty(t)&&((a=r.adlcls[t])&&e.rmClass("adl-"+a),r.adlcls[t]=i[t],e.addClass("adl-"+r.adlcls[t]))})},$.fn.objcls=function(t,e){var n=$.cr.obj;if("objcls"!==t&&(e=t),$.undef(e))return n[this.key()].objcls||"";var r,i=e.split(" ");for(r in i)i[r].length&&this[0].classList.add(i[r]);return n[this.key()].objcls=e,this},$.fn.addClass=function(t){var n=t.split(" ");return this.each(function(){var e=this;n.forEach(function(t){t.length&&e.classList.add(t)})})},$.fn.rmClass=function(t){var n=t.split(" ");return this.each(function(){var e=this;n.forEach(function(t){e.classList.remove(t)})})},$.fn.hasClass=function(t){return this[0].classList.contains(t)},$.fn.toggleClass=function(t){var n=t.split(" ");return this.each(function(){var e=this;n.forEach(function(t){e.classList.toggle(t)})})},$.mkCSS=function(e,t){var n=$.cr.sheet;if("object"==typeof t){var r,i="",a="";for(r in t){var s=$.cssify(r);a+=s.replace(/transform/g,"-webkit-transform").replace(/animation/g,"-webkit-animation")+": "+t[r]+";",a+=s+": "+t[r]+";",i+=s+": "+t[r]+";"}var o=e+" {"+a+"}";try{n.insertRule(o,n.cssRules.length)}catch(t){o=e+" {"+i+"}",n.insertRule(o,n.cssRules.length)}}else o=e+" {"+(t=t||"")+"}",n.insertRule(o,n.cssRules.length);return $.cr.sheet.cssRules[$.cr.sheet.cssRules.length-1]},$.fn.css=function(e,n){$.undef(n)||(n=":"+n),n=n||"",this.each(function(){var t=$.gc(this).tagName;$.mkCSS("#"+this.id+n+">"+t,e)})},$.pixPerc=function(t,e,n){var r=$.pf(t);return-1<t.indexOf("%")?(r=(n=$.pf(n))*(r/100)+e,$.pf((r/n*100).toFixed(3))+"%"):$.pf((r+e).toFixed(3))+"px"},$.fn.zorder=function(a,t){return("number"==typeof a||!$.undef(t))&&this.each(function(){var t,e=this,n=e.parentNode;if("number"==typeof a&&($.cr.getObjData(e.dataset.key).zorder=a),n)switch(a){case"bottom":n.insertBefore(e,$.gc(n));break;case"down":(t=e.previousSibling)&&n.insertBefore(e,t);break;case"up":(t=e.nextSibling)&&(t.nextSibling?n.insertBefore(e,t.nextSibling):$.ac(n,e));break;case"top":$.ac(n,e);break;default:e.dataset.z=a;for(var r=$.gc(n),i=0;r&&!i;)parseInt(r.dataset.z)>parseInt(a)?(n.insertBefore(e,r),i=!0):r=r.nextSibling;i||$.ac(n,e)}})},$.hash=function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n);e&=e}return Math.abs(e)},$.mkKeyframes=function(t,e){var n="";if("string"!=typeof e)for(var r in e)n+=r+" {"+e[r]+"} ";else n=e;var i="@"+$.pfx+"keyframes "+t+" {"+n+"}",n=n.replace(/transform/g,$.pfx+"transform").replace(/animation/g,$.pfxa);try{$.cr.sheet.insertRule(i,$.cr.sheet.cssRules.length)}catch(t){}},$.fn.clicktag=function(t,e){if(t=t||"main_exit",$.undef(e))return $.vd(t)||"";$.vd(t,e)},$.exit=function(t){"string"!=typeof t&&(t=!1),t=t||"main_exit",t=$.vd(t)||"",$.log("Exit to: "+t),$.adserver.exit(t),$.cr.stop(),EvBus.send("exit")},$.fn.scripts=function(o){return this.each(function(){var t=$(this),e=t.key(),n=$.cr.obj[e];n.scripts=n.scripts||{};var r,i="_stage=$($.cr.stage);";for(r in o){var a,s=atob(o[r]).trim();s.length&&("__adlready"==r?(a="_this=$('#"+t.id()+"');"+i+s,$.cr.readyStack.push(new Function(a))):(a="e.stopPropagation();_this=$(this);"+i+s,n.scripts[r]=new Function("e",a),t.on(r,n.scripts[r])))}})},$.fn.mkObj_stage=function(t){t.addClass("adl--stage"),$.addCtNode(t);var e=$.mkEl();e.className="adl--stage-curtain",$.ac(t[0],e),$.ruleIndex.stage="",$.ruleIndex.curtain=">.adl--stage-curtain"},$.fn.flow=function(n,t){if("flow"==n&&(n=t),$.undef(n)){t=this.key();return $.cr.obj[t].flow||"absolute"}return this.each(function(){var t=$(this),e=t.key();$.cr.obj[e].flow=n,t.rmClass("adl-inline adl-relative"),-1<["inline","relative"].indexOf(n)&&t.addClass("adl-"+n)})},$.fn.flatimage=function(t,e){"flatimage"==t&&(t=e);e=$.gc(this[0]);e&&(e.style.backgroundImage="url("+t+")")},$.fn.mkObj_text=function(t){$.ruleIndex.txt=" .adl-text",t[0].innerHTML='<div class="adl-text-boxw adl-obj-content"><div class="adl-text-box"><p class="adl-text adl-txtnode"></p></div></div>'},$.fn.mkObj_btext=function(t){$.ruleIndex.btxt=".adl-btext",t.addClass("adl-txtnode adl-btext")},$.fn.textNode=function(t){var e="adl-txtnode",e=(this[0].classList.contains(e)?this:this.find("."+e))[0];return t?e:$(e)},$.fn.btext=function(t,e){return this.text(t,e)},$.fn.text=function(t,n){return"text"!=t&&"btext"!=t&&(n=t),$.undef(n)?$.vd(this.key()):this.each(function(){var t=$(this),e=t.key();$.vd(e,n),t.textNode(1).innerHTML=n})},$.fn.font=function(t){if($.undef(t))return this.style("fontFamily");var e;t.css&&!$.cr.fonts[t.id]&&($.select("#"+t.id)||((e=$.mkEl("link")).rel="stylesheet",e.type="text/css",e.href=t.css,$.isIE()&&(e.href+=(e.href.indexOf("?")<0?"?":"&")+"adl="+Date.now()),e.id=t.id,$.ac($.d.head,e)),$.cr.fonts[t.id]=t),this.data("font_id",t.id||t),this.style("fontFamily",t.family||t)},$.fn.autoSize=function(){return this.each(function(){function t(t){return Math.round(t.replace(/[^0-9\.]+/g,""))}var e=$(this).textNode(1).parentNode,n=window.getComputedStyle(e),r=t(n.width),i=t(n.height),a=this.dataset;if(a.twidth!=r||a.theight!=i){for(var s=100,o=window.getComputedStyle(this),f=t(o.width),l=t(o.height),u=!1;s<11||r<=f&&i<=l?u=!0:(s--,e.style.fontSize=s+"%",r=t((n=window.getComputedStyle(e)).width),i=t(n.height)),!u;);a.twidth=r,a.theight=i}})},$.fn.mkObj_svgshape=function(t){$.ruleIndex.svg=" path",t.el().innerHTML='<svg class="adl-obj-content" width="100%" height="100%" viewBox="0 0 120 120" preserveAspectRatio="none"><path/></svg>'},$.fn.svgshape=function(t,r){return"svgshape"!=t&&(r=t),$.undef(r)?$.vd(this.key()):(this.each(function(){var t,e,n=$(this);"svgshape"==n.type()&&($.vd(n.key(),r),e=t=120,3==(n=r.split(":")).length&&(t=n[0],e=n[1],r=n[2]),(n=$.gc(this)).setAttribute("viewBox","0 0 "+t+" "+e),$.gc(n).setAttribute("d",r))}),this)},$.fn.mkObj_video=function(t){var e=$.mkEl("video");e.className="adl-obj-content",e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),$.ac(t[0],e)},$.fn.video=function(t,r){return"video"!==t&&(r=t),$.undef(r)?JSON.parse($.vd(this.key())||"{}"):(this.each(function(){var t,e,n=$(this);"video"==n.type()&&("string"!=typeof r&&(r=JSON.stringify(r)),t=n.key(),$.vd(t,r),(e=n.ctNode(1)).src=r,$.isIOS&&!n.data("autoplay")||($.cr.images[t]=1),e.oncanplay=function(){delete $.cr.images[t]},e.onerror=function(){$.log("Could not load video "+this.src),this.style.visibility="none",delete $.cr.images[t]})}),this)},$.fn.videoplayer=function(){return this.find("video")[0]},$.fn.image=function(t,e){return"image"!=t&&(e=t),$.undef(e)?JSON.parse($.vd(this.key())||"{}"):(this.each(function(){var t=$(this);"image"==t.type()&&("string"!=typeof e&&(e=JSON.stringify(e)),$.vd(t.key(),e),t.loadImage())}),this)},$.fn.loadImage=function(){return this.each(function(){var t,e=$(this),n=e.key();try{var r=JSON.parse($.vd(n)).path}catch(t){r=$.vd(n)}r&&r.length?((t=new Image).dataset.key=n,t.src=r,$.cr.images[n]=1,t.onerror=function(){$.log("Could not load image "+this.src),this.style.visibility="none",delete $.cr.images[n]},t.onload=function(){delete $.cr.images[n]},$.gc(e[0]).style.backgroundImage="url("+r+")"):(this.style.visibility="none",delete $.cr.images[n])}),this},$.fn.on=function(t,e,n){return n=n||!1,this.each(function(){this.addEventListener(t,e,n)})},$.fn.off=function(t,e,n){return n=n||!1,this.each(function(){this.removeEventListener(t,e,n)})},$.fn.at=function(t,e){var n=Array.prototype.slice.call(arguments);n.splice(3,0,this),EvBus.add.apply(EvBus,n)};var AdlEventBus=function(){this.listeners={}};AdlEventBus.prototype={add:function(t,e,n){var r=3<(r=Array.prototype.slice.call(arguments)).length?r.splice(3,r.length-1):[];this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({scope:n,callback:e,args:r})}};var EvBus=new AdlEventBus;_$.fn.prep=function(t){window.raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame;var e=this;$.fps=$.fps||30,e.timer={ls:0,ct:0,ss:0,rc:0,run:function(){this.r=1,this.rc||(this.ts=$.now(),this.ss=this.ts,this.rfi=window.raf(this.frame)),this.rc++},stop:function(){this.r=0},set:function(t){var e=this;e.ls=1e3*t,e.ct=e.ls,e.cf=Math.floor(e.ct/1e3*$.fps)},frame:function(t){t=$.now();var e,n=$.cr.timer;n.r&&(e=t-n.ts,n.ct+=e,n.cf=Math.floor(n.ct/1e3*$.fps),n.ef&&!$.cr.loop&&n.cf==n.ef?$.cr.end():n.lsf!=n.cf&&(n.lsf=n.cf,EvBus.send("frame",1))),n.ts=t,n.rfi=window.raf(n.frame)}},e.time=function(){return $.pf((($.cr.timer.cf||0)/$.fps).toFixed(2))},e.runtime=function(){return $.pf((($.cr.timer.ts-$.cr.timer.ss)/1e3).toFixed(2))},e.timeline=$.apply({duration:20,loops:1},t.timeline);var n=e.timeline;e.loop=$.pf(n.loops||0)-1,$.undef(n.endpoint)&&(n.endpoint=n.duration);var r=$.pf(n.endpoint),t=$.pf(n.duration);e.timer.ef=(r<t?r:t)*$.fps,e.ctrlclass=$.mkCSS("*",{"animation-fill-mode":"both","animation-delay":"0s","animation-iteration-count":n.loops||"infinite"});n=e.sheet.cssRules.length;e.sheet.insertRule("@"+$.pfx+"keyframes adlctrl {0% {opacity: 1;} 100% {opacity: 1;}}",n);n=e.sheet.cssRules[n];"function"==typeof n.appendRule&&"function"!=typeof n.insertRule?$.insRule="appendRule":$.insRule="insertRule",(t=document).addEventListener("animationend",function(t){"adlctrl"==t.animationName&&0<t.elapsedTime&&$.cr.end()}),t.addEventListener("animationiteration",function(t){"adlctrl"==t.animationName&&$.cr.doLoop()})},_$.fn.run=function(){var n=$.cr;if(!document.documentElement.clientWidth)return window.addEventListener("resize",n.run);window.removeEventListener("resize",n.run),n.ctrlclass.style.setProperty($.pfxa+"-play-state","paused"),$(n.stage).style("animation-name","adlctrl").find(".adl-obj").buildTLRules(),"Ready"==n.state&&setTimeout(function(){var t,e=$(".adl-obj-text.adl-txtShrink");e.length&&((t=function(){e.autoSize()})(),setTimeout(t,500),setTimeout(t,1e3),setTimeout(t,3e3)),n.stage.style.opacity="",n.ctrlclass.style.setProperty($.pfxa+"-duration",$.cr.timeline.duration+"s"),n.ctrlclass.style.setProperty($.pfxa+"-play-state","running"),($.isIE()||$.safari&&$.safari<13)&&_$.reAnim(),$.cr.timer.run(),EvBus.send("start"),$.cr.play()},50)},$.safari=function(){var t=navigator.userAgent,e=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(e[1])?0:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=t.match(/version\/(\d+)/i))&&e.splice(1,1,t[1]),"Safari"!==e[0]?0:$.pf(e[1]))}(),$.safanim=function(){var t=$.safari;return(11<t||10==t)&&(t=0),t?7==t?1:4:0}(),_$.reAnim=function(){$($.cr.stage).reAnimate(),$($.cr.stage).find(".adl-obj").reAnimate()},_$.tfactor=function(){return 6e4*$.safanim/$.cr.timeline.duration},_$.fn.goto=function(t){var e=this,n=e.timeline.duration;$(e.stage);t<0?t=0:n<=t&&(t=n-.01),t=$.pf(t.toFixed(1)),e.timer.set(t);var r=1;$.safanim&&"stop"==$.cr.state&&(r=_$.tfactor()),e.ctrlclass.style.setProperty($.pfxa+"-delay","-"+t*r+"s"),$.safanim&&e.ctrlclass.style.setProperty($.pfxa+"-duration",n*r+"s"),_$.reAnim(),EvBus.send("goto")},_$.fn.play=function(){var t,e=$.cr;"play"!=e.state&&(e.timer.run(),t=e.ctrlclass.style,"stop"==e.state&&$.safanim?(t.setProperty($.pfxa+"-duration",e.timeline.duration+"s"),t.setProperty($.pfxa+"-delay","-"+e.timer.ct/1e3+"s"),_$.reAnim()):t.setProperty($.pfxa+"-play-state","running"),e.state="play",EvBus.send("play"))},_$.fn.stop=function(){var t,e,n=$.cr;"play"===n.state&&(n.timer.stop(),n.state="stop",t=n.ctrlclass.style,$.safanim?(e=_$.tfactor(),t.setProperty($.pfxa+"-duration",n.timeline.duration*e+"s"),t.setProperty($.pfxa+"-delay","-"+n.timer.ct/1e3*e+"s"),_$.reAnim()):t.setProperty($.pfxa+"-play-state","paused"),EvBus.send("stop"))},_$.fn.end=function(t){$.undef(t)&&(t=!0),"end"!==$.cr.state&&($.cr.timer.stop(),t&&$.cr.timeline.endpoint<$.cr.timeline.duration&&$.cr.goto($.cr.timeline.endpoint),$.cr.ctrlclass.style.setProperty($.pfxa+"-play-state","paused"),$.cr.state="end",EvBus.send("end"))},_$.fn.doLoop=function(t){this.loop--,this.timer.ct=0,this.timer.cf=0,EvBus.send("loop")},_$.fn.getTL=function(){return this.timeline||(this.timeline={duration:20,loops:1}),this.timeline},_$.fn.getTimeData=function(){return{time:this.time,runtime:this.runtime,loop:this.timeline.loops-this.loop}},_$.fn.at=function(t,e){$(this.stage).at(t,e)},$.fn.data=function(t,e){if($.undef(e)&&$.undef(t))return $.cr.getObjData(this.key()).data||{};if($.undef(e)&&"string"==typeof t){var n=$.cr.getObjData(this.key());return n.data&&n.data[t]||""}var r={};return"object"!=typeof t?r[t]=e:r=t,this.each(function(){var t,e,n=$(this);for(e in n.hasClass("adl-obj")&&((n=$.cr.getObjData(n.key())).data=n.data||{},t=n.data),r)t&&(t[e]=r[e]),this.dataset[e]=r[e]})},$.fn.lineHeight=function(t,e,n){if($.undef(e)){var r,i=this.getStyle("lineHeight");return-1<i.indexOf("px")&&(r=parseFloat(this.getStyle("fontSize")),i=parseFloat(i)/r),Math.round(10*parseFloat(i))/10}this.style(t,e,n)},AdlEventBus.prototype.send=function(t,e){if(e||$.log(t),!$.undef(this.listeners[t])){var n=$.cr.getTimeData();n.event=t;for(var r=this.listeners[t].slice(),i=r.length,a=0;a<i;a++){var s,o=r[a];o&&o.callback&&(s=[n].concat(o.args),o.scope instanceof adlayer&&o.scope.each(function(){o.callback.apply(this,s)}))}}"frame"==t&&(t=$.cr.time().toFixed(1)+"s")!=this.t&&(this.t=t,this.send(t,1))},$.getRule=function(t,e){$.ruleIndex[e]||(e="obj");var n=$.cr.getObjData(t);return n.rules=n.rules||{},n.rules[e]||(t=$.mkSel(t,e),n.rules[e]=$.mkCSS(t,{})),n.rules[e]},$.mkSel=function(t,e){e=!!e&&$.ruleIndex[e];return e&&(t+=e),".adl-obj-"+t},$.t2p=function(t){return+(100*t).toFixed(4).slice(0,-1)+"%"},$.fn.timeline=function(t){$.cr.obj[this.key()].timeline=t},$.fn.getTL=function(){var t=this.key(),t=$.cr.getObjData(t);return t.timeline=t.timeline||{},t.timeline},$.fn.anim=function(t,e){return $.undef(e)?this.getTL()[t]:this.each(function(){$(this).getTL()[t]=e})},$.fn.setKey=function(r,i,t,e){r=$.pf(r).toFixed(1);var a={};"string"==typeof i?a[i]={v:t,e:e}:a=i,this.each(function(){var t=$(this).getTL();t.keyfr=t.keyfr||{};var e=t.keyfr,n=(r-$.pf(t.start||0)).toFixed(1);for(i in a)e[i]=e[i]||{kf:{}},$.setKeyVal(e[i],n,a[i].v,a[i].e)})},$.setKeyVal=function(t,e,n,r){var i,a;"string"!=typeof n||(i=$.pf(n))+(a=n.replace(i,""))===n&&(n=i,t.unit=a),t.kf[e]=t.kf[e]||{},t.kf[e].v=n,r&&(t.kf[e].e=r)},$.fn.setKeyValue=function(r,i,a){r=$.pf(r).toFixed(1);var s={};"string"==typeof i?s[i]=a:s=i,this.each(function(){var t=$(this).getTL();t.keyfr=t.keyfr||{};var e=t.keyfr,n=(r-$.pf(t.start||0)).toFixed(1);for(i in s)e[i]=e[i]||{kf:{}},$.setKeyVal(e[i],n,a)})},$.fn.getKeys=function(t){var e=this.getTL();return e.keyfr&&e.keyfr[t]&&e.keyfr[t].kf||!1},$.ruleit=function(t){var e="obj",n=t.split("_");return 1<n.length&&(e=n[0],t=n[1]),t=$.cssify(t),"obj"==e&&t.match($.ctstyles)&&(e="ct"),{rule:e,style:t}},$.fn.style=function(t,e,n){if("adl--stage"==this.key())return this.basestyle(t,e);var r=$.undef(e);return"string"==typeof t&&r?this.getStyle(t):$.undef(n)?this.each(function(){$(this).basestyle(t,e)}):(this.setKeyValue(n,t,e),this.buildTLRules(t))},$.fn.getStyle=function(t){var e=window.getComputedStyle,n=this.key(),r=t,i=this[0],a="adl--stage";n==a&&"borderRadius"!==t&&-1<t.indexOf("border")?f="curtain":n==a?f="ct":"btext"!==this.type()&&(f=(o=$.ruleit(t)).rule,t=o.style);var s,o=$.getRule(n,f),f=$.select(o.selectorText);if(f)return f=e(f)[t],n!==a&&this.getKeys(r)?s=this.getTL().keyfr[r].unit||"":(r=o.style[t],$.undef(r)||""===r||(o=$.pf(r),s=r.replace(o,""))),"%"==s&&("left"==t?t="width":"top"==t&&(t="height"),t=$.pf(e(i.parentNode)[t]),f=$.pf(($.pf(f)/t*100).toFixed(3))+"%"),f},$.fn.basestyle=function(t,e){var n="string"==typeof t;if($.undef(e)&&n)return this.getStyle(t);var s={};return n?s[t]=e:s=t,this.each(function(){var t,e,n,r,i=$(this),a=i.key();for(r in s)s.hasOwnProperty(r)&&(t=s[r],"obj"==(e=$.ruleit(r)).rule&&-1<r.indexOf("padding")&&(e.rule="txt"),"btext"==i.type()&&(e.rule="obj"),n=$.getRule(a,e.rule),r=$.dict[e.style]||e.style,"adl--stage"==a?"top"!=r&&"left"!=r&&(-1<r.indexOf("border")&&($.getRule(a,"curtain").style[r]=t),-1<["width","height"].indexOf(r)?$.getRule(a,"obj").style[r]=t:(r.indexOf("border")<0||0<r.indexOf("adius"))&&($.getRule(a,"ct").style[r]=t)):(0!=r.indexOf("animation")&&0!=r.indexOf("transform")||(r=$.pfx+r),n.style[r]=t))})},$.trfbase={translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,skewX:0,skewY:0},$.fn.transform=function(n,r,t){if($.undef($.trfbase[n]))return!1;var e=$.undef(r),i="string"==typeof n,a=$.undef(t);if(i&&e){e=this.getKeys(n);if(e){var s=this.getTL();return a&&(t=$.cr.time),(r=$.getValueAtTime(t-$.pf(s.start),$.fixEasings(e)))+(s.keyfr[n].unit||"")}if("translateX"==n||"translateY"==n)return n="translateX"==n?"left":"top",this.basestyle(n);s=this.trf();return($.undef(s[n])?$.trfbase:s)[n]}return a||"_base"===t?"translateX"==n||"translateY"==n?(n="translateX"==n?"left":"top",this.basestyle(n,r)):this.each(function(){var t=$(this),e=t.trf();e[n]=r,r=(r=$.mkTrfCSS(e)).replace(";",""),t.basestyle("transform",r),t.buildTLRules(n)}):(this.setKeyValue(t,n,r),this.buildTLRules(n))},$.fn.trf=function(){var t=this.getTL();return t.trf=t.trf||{},t.trf},$.mkTrfCSS=function(t){var e=$.apply(t),n="",r=e.translateX,t=e.translateY;$.undef(r)&&$.undef(t)||(n="translate3d("+($.undef(r)?"0px":r)+", "+($.undef(t)?"0px":t)+", 0px) ",delete e.translateX,delete e.translateY);var i,r=e.scaleX,t=e.scaleY;for(i in $.undef(r)&&$.undef(t)||(e.scale3d=($.undef(r)?1:r)+", "+($.undef(t)?1:t)+", 1",delete e.scaleX,delete e.scaleY),e)"width"!=i&&"height"!=i&&(n+=" "+i+"("+e[i]+")");return n+=";",$.undef(e.width)||(n+="width:"+e.width+";"),$.undef(e.height)||(n+="height:"+e.height+";"),n},$.mkTrfRule=function(t){var e=t.keyfr;if(e){function n(t,e){d[$.insRule]($.t2p(t)+" { "+$.pfx+"transform: "+e+"}")}var r,i,a,s=$.pf(t.start),o=s+$.pf(t.dur),f=0,l=$.pf($.cr.getTL().duration),u=s/l,c=.03333/l,d=t.rules.trf,h="",p={},y={},v=!1,g=0,m=!1;for(a in $.trfbase)e[a]&&e[a].kf&&$.okeys(e[a].kf).length?(y[a]=$.fixEasings(e[a].kf),m=!0):t.trf&&t.trf[a]&&t.trf[a]!=$.trfbase[a]&&(y[a]={0:{v:t.trf[a]}});if(m||(y={}),e.width&&e.width.kf&&$.okeys(e.width.kf).length&&(y.width=$.fixEasings(e.width.kf)),e.height&&e.height.kf&&$.okeys(e.height.kf).length&&(y.height=$.fixEasings(e.height.kf)),!$.okeys(y).length)return null;do{for(a in y){var k="";e[a]&&(k=e[a].unit),r=$.getValueAtTime(f,y[a]),p[a]=r+(k||"")}}while(i=$.mkTrfCSS(p),0==f&&0<s&&n(0,i),i!==h?(v&&n(u-c,h),n(u,i),h=i,v=!1,g=u):v=!0,u+=c,(f+=.03333)<=o&&u<=1);return i&&(v||o<l||g<1)&&n(1,i),i&&-1<i.indexOf("scale")}},$.getValueAtTime=function(t,e){t=+t.toFixed(3);var n=$.okeys(e);n.sort(function(t,e){return t-e});var r=n.length;if(1==r||t<=$.pf(n[0]))return e[n[0]].v;if(t>=$.pf(n[r-1]))return e[n[r-1]].v;for(var i,a,s,o=-1;i=n[++o],a=n[o+1]||t,$.pf(a)<t;);if(s=e[i],t==i)return s.v;r=(t-i)/(a-i),e=$.pf(e[a].v)-$.pf(s.v),r=$.yFromX(r,s.ev[0],s.ev[1],s.ev[2],s.ev[3]);e=$.pf(s.v)+r*e;return $.pf(e.toFixed(3))},$.yFromX=function(t,e,n,r,i){function a(t){return $.bezier(t,{x:0,y:0},{x:e,y:n},{x:r,y:i},{x:1,y:1})}for(var s=0,o=1,f=(o+s)/2,l=a(f),u=0;u<20&&1e-4<Math.abs(t-l.x);)u++,t>l.x?s=f:o=f,l=a(f=(o+s)/2);return l.y},$.bezier=function(t,e,n,r,i){var a=Math.pow(t,3),s=Math.pow(t,2),o=3*(n.x-e.x),f=3*(r.x-n.x)-o,l=i.x-e.x-o-f,u=3*(n.y-e.y),n=3*(r.y-n.y)-u,i=i.y-e.y-u-n;return{x:l*a+f*s+o*t+e.x,y:i*a+n*s+u*t+e.y}},$.fixEasings=function(t){var e,n,r=$.okeys(t||{});if(!r.length)return t;r.sort(function(t,e){return t-e}),r.reverse();var i=!1,a={};for(e in r){var s,o=t[n=""+r[e]].e||"in-out",f=[0,0,1,1];switch(i&&(f[2]=.58),o){case"in-out":i=!0,f[0]=.42;break;case"in":i=!0;break;case"out":i=!1,f[0]=.42;break;case"lin":i=!1}s="cubic-bezier("+f.join(",")+")",a[n]={e:s,v:t[n].v,ev:f}}return a},$.buildPresetKeyframes=function(t){if(t.keyfr={},t.inanim&&t.inkeyframes){var e=t.inkeyframes;for(i in t.indur=t.indur||1,e)for(var n in t.keyfr[i]={kf:{}},e[i].unit&&(t.keyfr[i].unit=e[i].unit),e[i].kf){var r=($.pf(n)*$.pf(t.indur)).toFixed(1);t.keyfr[i].kf[r]=e[i].kf[n]}}if(t.outanim&&t.outkeyframes){var i,a=t.outkeyframes;for(i in t.outdur=t.outdur||1,a)for(var n in t.keyfr[i]=t.keyfr[i]||{kf:{}},a[i].unit&&(t.keyfr[i].unit=a[i].unit),a[i].kf){r=($.pf(t.dur)-(1-$.pf(n))*$.pf(t.outdur)).toFixed(1);t.keyfr[i].kf[r]=a[i].kf[n]}}return t},$.fn.reAnimate=function(){return this.length&&(this.each(function(){this.style.setProperty($.pfxa,"none"),this.firstElementChild&&this.firstElementChild.style.setProperty($.pfxa,"none")}),$.cr.stage.offsetWidth,this.each(function(){this.style.setProperty($.pfxa,""),this.firstElementChild&&this.firstElementChild.style.setProperty($.pfxa,"")})),this},$.fn.buildTLRules=function(H){var J,q,U,W,Z,G;H&&"string"!=typeof H?H=$.okeys(H):H&&(1<Object.keys($.trfbase).indexOf(H)&&(H="trf"),H=[H]),$.cr.format&&(J=$.insRule,U=$.cr.format?"_"+$.cr.format:"",W=$.pfxa+"-name: tmp;",Z=$.pf($.cr.getTL().duration),G=$.pfxa+"-timing-function: ",this.each(function(){var t=$(this),e=t.key(),n=$.cr.getObjData(e);if("adl--stage"!=e&&"n"!=n.isactive){var r,i,a="btext"==t.type(),s={obj:[]},o={obj:[]},f="tl_"+e+U,l=t.getTL(),u=!1;if((l.inanim||l.outanim)&&(H=!(u=!0),l=$.buildPresetKeyframes(l)),l.rules){for(i in l.rules)if(!(H&&H.indexOf(i)<0)&&(I=l.rules[i])&&I.cssRules){for(r=I.cssRules;r.length;){var c=r[r.length-1].keyText,c=+$.pf(c).toFixed(3);if($.isIE()||(c+="%"),!I.findRule(c))break;I.deleteRule(c)}if(r.length)return}}else l.rules={},q=$.mkSel(e),l.rules.obj=$.mkCSS(q,W),q+=">.adl-obj-content",l.rules.ct=$.mkCSS(q,W);for(var d=l.rules,h=$.pf(l.start),p=h+$.pf(l.dur),y=h,v=p,g=!1,m=0,k=!1,b=0,x=Z,w=$(this.parentNode.parentNode);"adl--stage"!==w.key();){var j,_=w.getTL();_.keyfr&&((j=_.keyfr.scaleX)&&j.kf&&$.okeys(j.kf).length&&(k=!0),(j=_.keyfr.scaleY)&&j.kf&&$.okeys(j.kf).length&&(k=!0)),_.start>y&&(y=_.start),v>_.start+_.dur&&(v=_.start+_.dur),m||(b=_.start,x=_.start+_.dur,m=1),w=$(w[0].parentNode.parentNode)}var S,E=0<y?$.t2p(y/Z):"0%",O=v<Z?$.t2p(v/Z):"100%",C=y<p&&h<v,R=l.keyfr;if(C&&R)for(var T in R){var L=R[T],N=L.kf;if(N&&$.undef($.trfbase[T])&&"width"!=T&&"height"!=T){var P=$.okeys(N);if(P.length){var A=f+"_"+T,F=$.ruleit(T),I=F.rule;if(!H||-1<H.indexOf(T)){d[T]||(d[T]=$.mkKfRule(A));var B,D=d[T],z=L.unit||"",K="0%",M=$.fixEasings(N);for(B in P.sort(function(t,e){return t-e}),P){var X=M[P[B]];if(!$.undef(X.v)){var V=X.v;"opacity"==T&&0==V&&(V=1e-4);var Y=F.style+":"+V+z+";";if(0<(V=$.pf(P[B]))+h&&(K=$.t2p((V+h)/Z)),0==B&&"0%"!==K&&D[J]("0%{ "+Y+"}"),Z<V+h){D[J]("100%{ "+Y+"}");break}D[J](K+"{"+Y+G+X.e+"}"),B==P.length-1&&"100%"!==K&&(V<p&&"100%"!==O&&D[J](O+"{ "+Y+"}"),D[J]("100%{"+Y+"}"))}}}a&&(I="obj"),s[I]=s[I]||[],s[I].push(A),o[I]=o[I]||[],o[I].push("linear")}}}for(I in C&&!a&&(A=f+"_trf",d.trf||(d.trf=$.mkKfRule(A)),null!==(g=$.mkTrfRule(l))&&(s.obj.push(A),o.obj.push("linear"))),A=f+"_vis",d.vis||(d.vis=$.mkKfRule(A)),s.obj.push(A),o.obj.push("step-end"),H||C&&y<=b&&x<=v&&C?H||(o.obj.pop(),s.obj.pop()):(n=d.vis,C?(t="{"+G+" step-end;",S=(C=(g=C&&(g||k)&&0<y&&!a)?"opacity: ":"visibility:")+(g?"1":"visible")+";}",g=C+(g?"0.0001":"hidden")+";}",0<y&&(n[J]("0%"+t+g),n[J]("0.01%"+t+g)),n[J](E+t+S),"100%"!=O?(n[J](O+"{"+G+" step-start;"+g),n[J]("100%{"+g)):n[J]("100%{"+S)):(S="visibility: hidden;}",n[J]("0%{"+S),n[J]("100%{"+S))),s)d[I]||($.ruleIndex[I]?(q=$.mkSel(e,I),d[I]=$.mkCSS(q,W)):I="ct"),d[I].style.setProperty($.pfxa+"-name",s[I].join(",")),d[I].style.setProperty($.pfxa+"-timing-function",o[I].join(","));u&&delete l.keyfr}}),this.reAnimate())},$.mkKfRule=function(t){var e=$.cr.sheet,n=e.cssRules,t="@"+$.pfx+"keyframes "+t+" {}";return e.insertRule(t,n.length),n[n.length-1]};